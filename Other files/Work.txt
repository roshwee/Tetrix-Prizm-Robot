import java.io.IOException;
import com.fazecast.jSerialComm.*;
import java.util.*;

public class Main
{
    public static void main(String[] args) throws IOException, InterruptedException
    {
        SerialPort sp = SerialPort.getCommPort("COM3");
        sp.setComPortParameters(9600, 8, 1, 0);
        sp.setComPortTimeouts(SerialPort.TIMEOUT_WRITE_BLOCKING, 0, 0);

        sp.openPort();
        if (sp.openPort())
        {
            System.out.println("Port is open");
        }
        else
        {
            System.out.println("Port is closed");
            return;
        }

        /**
         * THIS IS WHERE YOU CODE
         */

        servoMove(20);
        Thread.sleep(3000);
        servoMove(180);
        Thread.sleep(3000);
        servoMove(10);
        Thread.sleep(3000);
        servoMove(50);
        Thread.sleep(3000);

        /**
         * STOP CODING HERE
         */

        Thread.sleep(10000);

        if (sp.closePort())
        {
            System.out.println("Port will now be closed");
        }
        else
        {
            System.out.println("Port remains open");
        }
    }

    static void servoMove(Integer degree) throws IOException
    {
        SerialPort sp = SerialPort.getCommPort("COM3");

        System.out.println("Servo Moves!");
        sp.getOutputStream().write(degree.byteValue());
        sp.getOutputStream().flush();
        System.out.println("Sent number: " + degree);
    }
}
